## Database Modeling

### Abstract

- 프로젝트에서 서비스하고자 하는 정보를, 가공하고 다듬어 실제 물리적인 데이터베이스를 구축하는 것 까지의 과정
- 개념적 모델링, 논리적 모델링, 물리적 모델링의 세 단계로 구성

---

### 개념적 모델링

- 서비스하고자 하는 비즈니스에 필요한 정보를 구성한다. 
  - Entity(개체)
    - 식별이 가능해야 하며, 속성을 갖는다. 
  - Attribute(속성)
    - 속성은 개체를 표현한다. 
    - 기초 속성: 개체가 원래 지니고 있는 속성
    - 추출 속성: 기초 속성으로부터 도출 가능한 속성
    - 설계 속성: 개체가 원래 지니지 않지만, 시스템 사용을 위해 만들어진 속성
      - 대학교 학번, 회사의 사번, 각 국가의 주민번호 등
  - Relationship(관계)
    - 개체 간의 관계를 나타낸다. 
    - 관계의 차수(1:1, 1:N, N:M) / 관계의 선택성(Optional, Mandatory)
    - 다대다 관계(N:M)는 관계형 데이터베이스에서, 두 개의 테이블로 표현이 불가능
      - 하나의 테이블을 더 두어야 한다. 
  - Identifier(식별자)
    - 개체의 각 인스턴스를 식별한다. 
    - 후보키(Candidate key)
      - 각 인스턴스를 식별 가능한 속성의 집합
    - 기본키(Primary key)
      - 후보키 중, 각 인스턴스를 대표하기에 가장 적합한 속성(들)
    - 대체키(Alternate key)
      - 기본키를 제외한 후보키의 집합
    - 복합키(Composite key)
      - 둘 이상으로 묶여, 식별자로써 활용되는 키
    - 대리키(Surrogate key)
      - 인위적으로 추가된 식별자
  - Entity Relationship Diagram(ERD; 개체-관계 다이어그램)
    - 개체, 속성, 그리고 개체 간의 관계에 대한 다이어그램

---

### 논리적 모델링

- Entity-Relationship Diagram을 기반으로, mapping rule을 적용한다. 
  - Mapping rule
    - Entity => Table
    - Attribute => Column
    - Relationship => Constraint (foreign key, table)
    - Identifier => Primary key
- 생성된 논리적 데이터베이스에 대해, 정규화를 적용
  - 제1 정규화
    - 중복되는 데이터를 제거한다. 
    - 자주 중복되는 데이터의 집합을, 하나의 테이블로 분리한다. 
    - 분리된 집합은, 참조 키를 통해 기존 테이블과 관계를 갖는다. 
  - 제2 정규화
    - 복합키를 갖는 테이블에 대해서 적용한다. 
      - 하나의 복합키에만 종속적인 속성(들)이 존재한다면, 이를 따로 분리한다. 
  - 제3 정규화
    - 기본키를 제외한 테이블의 속성이, 다른 속성을 결정한다면 이를 분리한다. 
  - BCNF, 제4 정규화, ...

---

### 물리적 모델링

- 논리적 데이터베이스를 기반으로, 실제 물리적인 저장 공간(DB)에 스키마를 구현
  - Column의 데이터 타입(domain)을 설정
  - Index, Trigger, 역 정규화를 진행
    - 정규화된 데이터베이스는, Join이 자주 일어나는 테이블들에 대해 비효율적일 수 있다. 
- Reverse Engineering
  - 생성된 ERD을 통해 DB를 생성할 수 있는 DDL문을 생성
- Forward Engineering
  - DDL 문을 통해 생성된 DB에 대해, ERD를 생성