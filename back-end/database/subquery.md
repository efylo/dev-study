## Sub-query

### Abstract

- 다른 SQL문 내부에 존재하는 SELECT문을 일컫는다. 
- 종류
  - Nested sub-query
    - WHERE문 내부에 작성하는 서브쿼리
    - 단일 행 / 복수 행 / 다중 컬럼
  - In-line view
    - FROM문 내부에 작성하는 서브쿼리
    - 뷰의 형태로 존재
  - Scalar sub-query
    - SELECT문에 작성하는 서브쿼리

---

### Nested

- 비교 연산자
  - 단일 행 비교 연산자
    - =, >, <, >=, <=, <>, ...
    - 단일 행 비교 연산자 내부에는, 단일 행이 보장된 서브쿼리 실행 결과만이 가능
    - 서브쿼리 내부에 WHERE절을 통해 비교할 때, PK 값을 통해 비교한다면, 단일 행이 보장
  - 다중 행 비교 연산자
    - in, any, all, exists, ...
    - 다중 행 비교 연산자 내부에는, 단일 혹은 다중 서브쿼리 실행 결과가 가능
    - any: 비교 연산자가 하나 이상 참을 반환
    - all: 비교 연산자가 모두 참을 반환
  - 다중 컬럼 비교 연산자
    - 비교 연산자 왼쪽: 소괄호() 안에 값을 위치
    - 비교 연산자 오른쪽: 서브쿼리의 결과는 왼쪽 값과 동일한 데이터 타입 / 개수가 존재

---

### In-line View

- FROM절 내부의 다중 행 SELECT문을 활용
- TopN 쿼리
  - 위에서부터 Top N개의 행을 SELECT
  - MySQL의 LIMIT구문을 활용할 수 있다. 
  - SET 구문을 통해 @을 통해 변수를 저장해서, 일반적인 경우에도 사용할 수 있다. 

---

### Scalar

- SELECT절 내부에 존재하는 단일 행 SELECT문
  - SELECT문의 결과로 출력된다. 